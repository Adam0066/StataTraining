---
title: "Import and clean data"
author: "Laura Hughes"
date: "December 14, 2015"
output: html_document
---

## Overview

## Import in helper functions to make R more powerful
R out of the box (called 'base R') is great. But the really, really powerful thing about R is that they have a community of people helping write other functions to expand R's toolkit and make it better, faster, and more powerful. Before we start playing with data, we'll import some of the most useful functions to import, clean, manipulate, and visualize data.

```{r import fucntions}
# Workhorse libraries for data science: data cleanup, summaries, merging, etc.
library(dplyr) # Filter, create new variables, summarise, ... Basically, anything you can think to do to a dataset
library(tidyr) # Reshape and merge datasets
library(stringr) # String manipulation

# Incredibly powerful plotting library built off of the "Grammer of Graphics"
library(ggplot2)

# Libraries to help import files
library(haven) # Imports in files from Stata, SAS, and SPSS
library(readr) # An advanced form of the base 'read.csv' file with some added functionality.

library(knitr) # Helper function to produce this 
```

## Let's get started and get data into R!

```{r}
spent = read_csv('~/GitHub/StataTraining/Data/Full_ForeignAssistanceData_spent.csv')

# Print out a table of what the data looks like.
# At the command line, you can type View(spent), which pulls up a table to view the data.

# There's also a function called 'head' which allows you to look at a little bit of the data
knitr::kable(head(spent))
```

### Wait... that doesn't give me what I want.  
Instead of having the column names ("Fiscal Year" ...) at the top, there's a gap.

#### Why is that?
It looks like there are two extra lines at the top.

#### How do I fix that?
I need to specify where the row containing the column names is, and to skip the first rows.  Luckily, 'read_csv' has an argument to 'skip' the number of lines you specify, and a 
'col_names' boolean (true/false) argument to make sure that the top row is interpreted as being the header (column names).

```{r fix import}
# Read the help documentation to figure out where the arguments going.
help("read_csv")

spent = read_csv('~/GitHub/StataTraining/Data/Full_ForeignAssistanceData_spent.csv',
                 col_names = TRUE, skip = 2)

# Check that this looks better
kable(head(spent))
```

Excellent!  That looks a lot better.

### Now let's start to take a deeper look at the data.
Let's take another look at our data and make sure that everything is imported correctly.

R has many redundant ways of doing things. Sometimes they're exactly the same 
(with different details under the hood), and sometimes they're slightly different and complementary.

In this case, 'glimpse' and 'summary' provide two quick looks at what a dataset looks like.

```{r look at data}
# 'glimpse' gives you the name of the variable, its type, and the initial values.
glimpse(spent)

# 'summary' similarly gives you the type of data, but also for numerical data, gives you 
# quick stats on the range of the data, the mean, and the distribution.
summary(spent)

```
#### D'oh! The main column we care about -- amount spent -- isn't seen as being a number.

